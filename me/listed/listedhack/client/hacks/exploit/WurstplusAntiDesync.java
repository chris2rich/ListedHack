package me.listed.listedhack.client.hacks.exploit;

import java.util.Iterator;
import me.listed.listedhack.client.event.events.PacketReceivedEvent;
import me.listed.listedhack.client.hacks.WurstplusCategory;
import me.listed.listedhack.client.hacks.WurstplusHack;
import me.listed.listedhack.client.util.Wrapper;
import net.minecraft.entity.Entity;
import net.minecraft.entity.item.EntityEnderCrystal;
import net.minecraft.init.SoundEvents;
import net.minecraft.network.play.server.SPacketSoundEffect;
import net.minecraft.util.SoundCategory;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;

public class WurstplusAntiDesync extends WurstplusHack {
   public WurstplusAntiDesync() {
      super(WurstplusCategory.WURSTPLUS_EXPLOIT);
      this.name = "Anti Desync";
      this.tag = "AntiDesync";
      this.description = "no desync";
   }

   @SubscribeEvent
   public void onPacketReceive(PacketReceivedEvent event) {
      if (event.getPacket() instanceof SPacketSoundEffect) {
         SPacketSoundEffect packet = (SPacketSoundEffect)event.getPacket();
         if (packet.func_186977_b() == SoundCategory.BLOCKS && packet.func_186978_a() == SoundEvents.field_187539_bB) {
            try {
               Iterator var3 = Wrapper.getWorld().field_72996_f.iterator();

               while(var3.hasNext()) {
                  Entity e = (Entity)var3.next();
                  if (e instanceof EntityEnderCrystal && e.func_70011_f(packet.func_149207_d(), packet.func_149211_e(), packet.func_149210_f()) <= 6.0D) {
                     e.func_70106_y();
                  }
               }
            } catch (Exception var5) {
               var5.printStackTrace();
            }
         }
      }

   }
}
